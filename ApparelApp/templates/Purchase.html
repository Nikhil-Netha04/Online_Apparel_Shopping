{% load static %}
<html>
<head>
<title>Online Apparel Shopping</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="{% static 'style.css' %}"/>
 <script LANGUAGE="Javascript" >
function validate(){
	var x=document.forms["f1"]["t2"].value;
	var y=document.forms["f1"]["t3"].value;
	
	if(x == null || x==""){
		window.alert("Card no must be enter");
		document.f1.t2.focus();
		return false;
	}
	if(!luhnCheck(x)) {
	    window.alert("Please enter valid card no");
		document.f1.t2.focus();
		return false;
	}
	if(y == null || y==""){
		window.alert("CVV no must be enter");
		document.f1.t3.focus();
		return false;
	}
	if(isNaN(y)){
		window.alert("CVV must be numeric value");
		document.f1.t3.focus();
		return false;
	}
	if(y.length != 3){
		window.alert("CVV must have 3 digits only");
		document.f1.t3.focus();
		return false;
	}
	return true;
}
	function luhnCheck(cardNumber) {
 let sum = 0;
    let isEven = false;

    for (let i = cardNumber.length - 1; i >= 0; i--) {
        let digit = parseInt(cardNumber.charAt(i), 10);

        if (isEven) {
            digit *= 2;
            if (digit > 9) {
                digit -= 9;
            }
        }
        sum += digit;
        isEven = !isEven;
    }
    return sum % 10 === 0;
}	
	
	</script>
</head>
<body>
<div id="wrapper">
	<div id="header">
		<div id="logo">
			<center><font size="4" color="yellow">Online Apparel Shopping</font></center>
		</div>
		<div id="slogan">
			
		</div>
	</div>
	<div id="menu">
		<ul><center>
	  <li><a href="{% url 'ItemSearch' %}">Search Catalogue</a></li>
	  <li><a href="{% url 'TrackOrder' %}">Track Order</a></li>
	   <li><a href="{% url 'Feedback' %}">Feedback</a></li>
      <li><a href="{% url 'index' %}">Logout</a></li>		
		</center></ul>
<br class="clearfix" />
				</div>
			
	<div id="splash">
		<img class="pic" src="{% static 'images/investor.jpg' %}" width="870" height="130" alt="" />
	</div>	
			<center>
<form name="f1" method="post" action={% url 'PaymentAction' %} OnSubmit="return validate()">
	{% csrf_token %}<br/>
   <h3><b>Payment Screen</b></h3>
   
	<font size="" color="black"><center>{{ data }}</center></font>
						
						<table align="center" width="80" >
						{{ data1|safe }}
			 <tr><td><font size="3" color="black">Card&nbsp;No&nbsp;</b></td><td><input type="text" name="t2" style="font-family: Comic Sans MS" size="30"/></td></tr>
         
		  
		<tr><td><font size="3" color="black">CVV&nbsp;No&nbsp;</b></td><td><input type="password" name="t3" style="font-family: Comic Sans MS" size="30"/></td></tr>

		
		 
			<tr><td></td><td><input type="submit" value="Submit">
			</td>
			</table>
			<br/><br/><br/><br/><br/>
				</div>	
					
				</div>
				
	</body>
</html>